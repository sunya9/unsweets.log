title: pre要素使った時の最初の改行を消したい(jQuery)
id: 18
categories:
  - Memo
date: 2011-08-27 12:14:08
tags:
---

pre要素はソース提示とかの時によく使いますよね。

まあどういうことかは続きを見れば...

<!--more-->

例えばこんなソースを書いたとします。

    <pre class="prettyprint"><code>
    $("pre").each(function(){
    $(this).text($(this).text().replace(/^s/, ""));
    });
    </code></pre>
    `</pre>

    そうすると以下のようになってしまいます。

    <pre class="prettyprint">`
    $("pre").each(function(){
    $(this).text($(this).text().replace(/^\s/, ""));
    });
    `</pre>

    こんな感じに一行空いちゃうんですよね（このブログではすでに対策してるので擬似的に表現してますが）。

    原因は<pre>要素が始まった直後に改行してるから。それだけ。でもこれソース上の問題、続けると見づらいですよね？...見づらいですよね？少なくとも僕は見づらいです...

    んなわけで対策コード。というかさっき書いたのが対策コードのかけらだったりする。

    <pre class="prettyprint">`
    $("pre").each(function(){
    $(this).text($(this).text().replace(/^\n/, ""));
    });

そんなわけでこれを実行すればおっけー。仕組みは簡単でpre要素の最初のテキストだけ正規表現で空行を表す\sを使えばいいというわけです。先頭マッチを使ってるので先頭に改行がない場合は無視されます。

余談ですが意図的に1行開けたい時はもう一行改行をすればおっけー。